FROM golang:1.13.3 as build

WORKDIR /app
# Copy go mod files and downwload dependencies
COPY go.mod go.sum ./
RUN go mod download

# Copy source code file and build the package
COPY src .

RUN CGO_ENABLED=0 go build -o app .


FROM alpine:latest

COPY --from=build /app/app /app

EXPOSE 8080

CMD ["/app"]